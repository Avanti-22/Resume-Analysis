{% extends 'base.html' %}
{% block content %}
<style>
/* Custom CSS styles for job cards */
.job-card {
  width: 100%;
  margin: 10px 0;
  background-color: #C7C5C0;
  border-radius: 1rem;
  padding: 15px; /* Added padding for card content */
}

.card-body {
  display: flex;
  flex-direction: column;
}

.card-body p {
  margin-bottom: 10px;
}

.description {
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 3; /* Limit text to 3 lines */
  -webkit-box-orient: vertical;
  transition: -webkit-line-clamp 0.3s ease; /* Smooth transition for line clamp */
}

.expanded .description {
  -webkit-line-clamp: unset; /* Remove line clamp when expanded */
}

.btn-row {
  display: flex;
  justify-content: space-between;
  margin-top: 10px;
}

.btn {
  flex: 1;
  margin-right: 10px; /* Add margin between buttons */
  background-color: #94949C;
}
</style>

<div class="container justify-content-center">
  <h1 class="h1 font-weight-bold text-center text-white my-4">Remotive Jobs</h1>
  <div class="row">
    {% for job in jobs %}
      <div class="col-md-6"> <!-- Each job card takes half of the row (col-md-6) -->
        <div class="card job-card" id="card-{{ forloop.counter }}">
          <div class="card-body">
            <h3 class="card-title">{{ job.title }}</h3>
            <hr>
            <p class="card-text description">{{ job.description }}</p>
            <p><strong>Company:</strong> {{ job.company_name }}</p>
            <p><strong>Category:</strong> {{ job.category }}</p>
            <p><strong>Tags:</strong> {% for tag in job.tags %}<span>{{ tag }}</span>{% if not forloop.last %}, {% endif %}{% endfor %}</p>
            <p><strong>Job Type:</strong> {{ job.job_type }}</p>
            <p><strong>Publication Date:</strong> {{ job.publication_date }}</p>
            <p><strong>Candidate Required Location:</strong> {{ job.candidate_required_location }}</p>
            <p><strong>Salary:</strong> {{ job.salary }}</p>
            <div class="btn-row">
              <button class="btn read-more-btn" onclick="toggleDescription('card-{{ forloop.counter }}')" style="background-color:#94949C">Read More</button>
              <a href="{{ job.url }}" class="btn" style="background-color:#94949C">View Details</a>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>

<script>
function toggleDescription(cardId) {
  var card = document.getElementById(cardId);
  var desc = card.querySelector(".description");
  var btnText = card.querySelector(".read-more-btn");

  if (desc.classList.contains("expanded")) {
    // Collapse the description
    desc.classList.remove("expanded");
    desc.style.webkitLineClamp = "3"; // Truncate description to 3 lines
  } else {
    // Expand the description
    desc.classList.add("expanded");
    desc.style.webkitLineClamp = "unset"; // Remove line clamp when expanded
  }

  // Toggle button text based on description state
  btnText.innerHTML = desc.classList.contains("expanded") ? "Read Less" : "Read More";
}
</script>
{% endblock content %}
