{% extends 'base.html' %}
{% block content %}
<style>
/* Add your custom CSS styles for job cards here */
.job-card {
  width: 100%;
  margin: 10px 0; /* Add margin between horizontal cards */
  background-color: #C7C5C0;
  border-radius: 1rem;
}

.card-body {
  display: flex;
  flex-direction: column;
}

.card-body p {
  margin-bottom: 10px; /* Add space between paragraphs */
}

.description {
  overflow: hidden;
  text-overflow: ellipsis;
  max-height: 3rem; /* Set maximum height for truncated text */
  transition: max-height 0.3s ease; /* Add smooth transition for height change */
}

.expanded .description {
  max-height: none; /* Remove max-height when expanded */
}

.btn{
    background-color: background-color: #94949C;
}
</style>

<div class="container justify-content-center">
  <h1 class="h1 font-weight-bold text-center my-4">Remotive Jobs</h1>
  <div class="row">
    {% for job in jobs %}
      <div class="col-md-12">
        <div class="card job-card" id="card-{{ forloop.counter }}">
          <div class="card-body">
            <h5 class="card-title">{{ job.title }}</h5>
            <p class="card-text description">{{ job.description }}</p>
            <p><strong>Company:</strong> {{ job.company_name }}</p>
            <p><strong>Category:</strong> {{ job.category }}</p>
            <p><strong>Tags:</strong> {% for tag in job.tags %}<span>{{ tag }}</span>{% if not forloop.last %}, {% endif %}{% endfor %}</p>
            <p><strong>Job Type:</strong> {{ job.job_type }}</p>
            <p><strong>Publication Date:</strong> {{ job.publication_date }}</p>
            <p><strong>Candidate Required Location:</strong> {{ job.candidate_required_location }}</p>
            <p><strong>Salary:</strong> {{ job.salary }}</p>
            <button class="btn read-more-btn" onclick="toggleDescription('card-{{ forloop.counter }}')">Read More</button>
            <a href="{{ job.url }}" class="btn">View Details</a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>

<script>
function toggleDescription(cardId) {
  var card = document.getElementById(cardId);
  var desc = card.querySelector(".description");
  var btnText = card.querySelector(".read-more-btn");

  if (desc.classList.contains("expanded")) {
    // Collapse the description
    desc.classList.remove("expanded");
    desc.style.maxHeight = "3rem"; // Truncate description to 3rem
  } else {
    // Expand the description
    desc.classList.add("expanded");
    desc.style.maxHeight = desc.scrollHeight + "px"; // Expand to full height
  }

  // Toggle button text based on description state
  btnText.innerHTML = desc.classList.contains("expanded") ? "Read Less" : "Read More";
}
</script>
{% endblock content %}